<div class="layout">

  <mat-drawer-container autosize style="height: 100dvh;">

    <mat-drawer #drawer mode="side" class="sidebar" >

      <mat-toolbar>
        <button (click)="drawer.toggle()" mat-icon-button class="example-icon">
          <mat-icon>close</mat-icon>
        </button>
      </mat-toolbar>
      <mat-card>
        @if(currentUser){

          <button mat-card-avatar class="avatar mx-auto mt-2"></button>
          <span class="mx-auto">{{currentUser.name}}</span>
          <span class="mx-auto" style="color: gray;">{{currentUser.email}}</span>
          <mat-divider class="mt-2 w-100"></mat-divider>

          <mat-list>
            <mat-list-item matRipple [routerLink]="['/users']" (click)="drawer.toggle()">
              <mat-icon matListItemIcon>settings</mat-icon>
              Cuenta
            </mat-list-item>

            @if(currentUser.role === 'Proveedor' || currentUser.role === 'Administrador'){
              <mat-list-item matRipple [routerLink]="['/suppliers']" (click)="drawer.toggle()">
                <mat-icon matListItemIcon>badge</mat-icon>
                Proveedores
              </mat-list-item>
            }

            @if(currentUser.role === 'Administrador'){
              <mat-list-item matRipple [routerLink]="['/administration']" (click)="drawer.toggle()">
                <mat-icon matListItemIcon>shield_person</mat-icon>
                Administracion
              </mat-list-item>
            }

            <mat-list-item class="mt-3" matRipple (click)="logout()">
              <mat-icon matListItemIcon>logout</mat-icon>
              Cerrar sesion
            </mat-list-item>
          </mat-list>
        }@else {

          <button mat-flat-button class="mt-2 mb-2 w-75 mx-auto" [routerLink]="['/auth', 'login']" >Iniciar sesion</button>
          <button mat-button class="mt-2 mb-2 w-75 mx-auto" [routerLink]="['/auth', 'new-account']">Registrate</button>

        }
      </mat-card>


    </mat-drawer>

    <router-outlet />

    <mat-toolbar></mat-toolbar>
  </mat-drawer-container>
</div>


